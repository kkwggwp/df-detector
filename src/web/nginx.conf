server {
    # 80ë²ˆ í¬íŠ¸ì—ì„œ ìš”ì²­ì„ ë°›ìŠµë‹ˆë‹¤.
    listen 80;

    # 1. ê¸°ë³¸ ìš”ì²­ ì²˜ë¦¬ (HTML, CSS, JS íŒŒì¼)
    # /usr/share/nginx/html í´ë”ì—ì„œ íŒŒì¼ì„ ì°¾ìŠµë‹ˆë‹¤.
    location / {
        root   /usr/share/nginx/html;
        index  index.html;
        try_files $uri $uri/ /index.html;
    }

    # 2. '/predict' ìš”ì²­ ì²˜ë¦¬ (ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ)
    # ì´ ê²½ë¡œë¡œ ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì„ GPU ì„œë²„ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤.
    location /predict {
        # ğŸ’¥ ì¤‘ìš”: 'gpu-service'ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œ GPU íŒŒë“œë¥¼ ìœ„í•´
        # ìƒì„±í•  ì„œë¹„ìŠ¤ì˜ ì´ë¦„ì…ë‹ˆë‹¤. í¬íŠ¸ëŠ” worker.pyì—ì„œ ì„¤ì •í•œ 8080ì…ë‹ˆë‹¤.
        proxy_pass http://gpu-serv:8080;

        # íƒ€ì„ì•„ì›ƒ ë° í—¤ë” ì„¤ì •
        proxy_connect_timeout       600;
        proxy_send_timeout          600;
        proxy_read_timeout          600;
        send_timeout                600;
        proxy_set_header            Host $host;
        proxy_set_header            X-Real-IP $remote_addr;
    }
}